<div class="flex flex-col items-center justify-start min-h-screen px-7 py-20 overflow-y-auto">
  @if (loading) {
  <mat-spinner diameter="50"></mat-spinner>
  } @else if (event) {

  <mat-card class=" w-full flex flex-col items-end p-6">

    <div class="text-center w-full">
      <button mat-flat-button class="primary-button-cancel mb-8" (click)="cancelParticipation(event.id)">
        ANNULE VOTRE PARTICIPATION </button>

      <h3 class="text-xl font-semibold mb-2 pb-2">{{ event.title }}</h3>
      <p class="text-sm leading-relaxed max-h-20 overflow-y-auto">
        {{ event.description }}
      </p>
    </div>

    <div class="flex flex-col items-center w-full text-sm leading-relaxed mt-4 gap-2">
      <p><strong> STATUS DE L'ACITIVITE : </strong> {{getStatusLabel(event.status) }}</p>
      <p><strong>VOTRE PARTICIPATION :</strong> {{ getParticipationLabel(event.participationStatus) }}
      </p>

    </div>
    <img [src]="event.imageUrl" alt="{{ event.title }}"
      class="w-[280px] h-[130px]  object-cover my-3 border border-black" />


    <div class="flex flex-col w-full text-sm leading-relaxed  gap-3">
      <p class="flex items-center justify-start gap-1">
      <p><strong>ACITIVITE : </strong> {{ event.activityName }}</p>
      <p><strong>DATE :</strong> {{ event.eventDate | date:'mediumDate' }}</p>
      <p><strong>HORAIRE :</strong> {{ event.startTime }} - {{ event.endTime }}</p>
      <p><strong>ADRESSE :</strong> {{ event.addressLabel }}</p>
      <p><strong>NIVEAU :</strong> {{ getLevelLabel(event.level) }}</p>
      <p><strong>MATERIAL :</strong> {{ getMaterialLabel(event.material) }}</p>
      <p><strong>NOMBRE DE PARTICIPANT :</strong> {{ event.maxParticipants }}</p>
      <p><strong>ORGANISATEUR :</strong> {{ event.organizerName }}</p>
    </div>


    <div class="flex flex-col w-full mt-4 ">
      <p class="font-semibold text-lg mb-2 border-b border-black ">LISTE DES PARTICIPANTS :</p>
      @if (event.acceptedParticipants && event.acceptedParticipants.length > 0) {
      <ul class="list-disc pl-6 flex flex-col gap-1">
        @for (p of event.acceptedParticipants; track p.id) {
        <li>{{ p.firstName }} {{ p.lastName }}</li>
        }
      </ul>
      } @else {
      <p class="text-gray-500">Aucun participant accepté pour le moment.</p>
      }
    </div>

    <div class="mt-8 flex flex-col items-center gap-4 w-full px-4">
      <button mat-flat-button class="primary-button" routerLink="/conversation:id">Allez à la conversation</button>
    </div>

  </mat-card>
  } @else {
  <p class="text-red-600">Événement introuvable.</p>
  }
</div>